<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Corps énergétique</title>
<style>
    body { margin: 0; overflow: hidden; background: #b87363; }
</style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/loaders/OBJLoader.js"></script>

<script>

// =======================
// SCENE
// =======================

const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
    45,
    window.innerWidth / window.innerHeight,
    0.1,
    10000
);

camera.position.set(0, 100, 300);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// =======================
// LUMIÈRE
// =======================

const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(0, 200, 200);
scene.add(light);

const ambient = new THREE.AmbientLight(0xffffff, 0.5);
scene.add(ambient);

// =======================
// TEST CUBE (sécurité)
// =======================

const testCube = new THREE.Mesh(
    new THREE.BoxGeometry(20, 40, 10),
    new THREE.MeshNormalMaterial()
);
testCube.position.set(-80, 0, 0);
scene.add(testCube);

// =======================
// POINTS ÉNERGÉTIQUES
// =======================

const pointsData = [
{ name:'vc1', x:0.05, y:-12.7, z:-4.2 },
{ name:'vc2', x:0.05, y:-6, z:6.4 },
{ name:'vc3', x:0.05, y:-2.9, z:7.1 },
{ name:'vc4', x:0.05, y:0.2, z:7.17 },
{ name:'vc5', x:0.05, y:3.3, z:7.25 },
{ name:'vc6', x:0.05, y:6.4, z:7.3 },
{ name:'vc7', x:0.05, y:9.5, z:7.2 },
{ name:'vc8', x:0.05, y:12.7, z:6.1 },
{ name:'vc9', x:0.05, y:15.9, z:6.1 },
{ name:'vc10', x:0.05, y:18.4, z:6.38 },
{ name:'vc11', x:0.05, y:20.9, z:6.38 },
{ name:'vc12', x:0.05, y:23.4, z:6.58 },
{ name:'vc13', x:0.05, y:25.9, z:6.6 },
{ name:'vc14', x:0.05, y:28.4, z:5.95 },
{ name:'vc15', x:0.05, y:30.9, z:5.06 },
{ name:'vc16', x:0.05, y:33.4, z:4.9 },
{ name:'vc17', x:0.05, y:36, z:4.7 },
{ name:'vc18', x:0.05, y:38.6, z:3.6 },
{ name:'vc19', x:0.05, y:41.2, z:2.4 },
{ name:'vc20', x:0.05, y:43.8, z:1.2 },
{ name:'vc21', x:0.05, y:46.4, z:-0.9 },
{ name:'vc22', x:0.05, y:49, z:-2.1 },
{ name:'vc23', x:0.02, y:56, z:-0.2 },
{ name:'vc24', x:0.02, y:60, z:5 }
];

pointsData.forEach(p => {
    const sphere = new THREE.Mesh(
        new THREE.SphereGeometry(1.5, 16, 16),
        new THREE.MeshBasicMaterial({ color: 0x00ffff })
    );

    sphere.position.set(p.x * 10, p.y, p.z * 10);
    scene.add(sphere);
});

// =======================
// CHARGEMENT DU CORPS
// =======================

const loader = new THREE.OBJLoader();

loader.load(
    'corpo.obj',   // ⚠️ même dossier que le HTML

    function(object) {

        console.log("OBJ chargé ✅");

        object.traverse(function(child) {
            if (child.isMesh) {
                child.material = new THREE.MeshStandardMaterial({
                    color: 0xf2c6a0,
                    roughness: 0.6,
                    metalness: 0.1
                });
            }
        });

        object.scale.set(10, 10, 10);
        object.position.set(0, -80, 0);

        scene.add(object);
    },

    undefined,

    function(error) {
        console.error("Erreur OBJ :", error);
    }
);

// =======================
// RENDER LOOP
// =======================

function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
}

animate();

// =======================
// RESIZE
// =======================

window.addEventListener('resize', function () {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});

</script>
</body>
</html>
